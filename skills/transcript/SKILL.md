---
name: transcript
description: Generate markdown transcripts from Claude Code session files. Converts JSONL session logs to readable markdown with timing, tool operations, and hook context.
allowed-tools: Read,Bash
version: 1.4.0
permalink: skills-transcript
---

# Transcript Skill

Convert Claude Code JSONL session files to readable markdown transcripts.

## Arguments

- `today` (default) - transcribe all sessions from today
- `YYYYMMDD` - transcribe sessions from specific date
- `<path>` - transcribe specific session file

## Workflow

### 1. Find Today's Sessions

```bash
cd $AOPS && uv run python -c "
from lib.session_reader import find_sessions
from datetime import datetime, timezone
target = datetime.now(timezone.utc).date()
# SessionInfo: path, project, session_id, last_modified (NO start_time!)
for s in find_sessions():
    if s.last_modified.date() == target:
        print(f'{s.session_id[:8]} {s.project} {s.path}')
"
```

### 2. Generate Transcripts

For each session, run:

```bash
cd $AOPS && uv run python scripts/claude_transcript.py \
  /path/to/session.jsonl \
  --abridged-only \
  -o $ACA_DATA/sessions/claude/YYYYMMDD-shortproject-sessionid-slug
```

**Default**: Use `--abridged-only` unless user explicitly requests full transcripts.

**Output naming**: `YYYYMMDD-<shortproject>-<session_id[:8]>-<slug>-{full,abridged}.md`

**Naming rules**:
- `shortproject`: Last path component, simplified (e.g., `opt-nic-buttermilk` → `buttermilk`)
- `slug`: 1-3 word summary of session work (from `--slug` or auto-generated from first user message)

**Abridged version generated by default** - use `--full` to also generate full transcripts.

### 3. Skip Up-to-Date

Before generating, check if transcript exists and is newer than session:

```bash
# Check if transcript already exists for session abc12345
ls $ACA_DATA/sessions/claude/*abc12345*-abridged.md 2>/dev/null
```

If file exists and is newer than session's `last_modified`, skip.

### 4. Report

```
Transcripts: Generated N | Skipped M (up-to-date)
```

## Output Versions

**Abridged version generated by default** (reduces token cost, sufficient for most use cases).

| Version | Content | Use Case |
|---------|---------|----------|
| `*-abridged.md` | File references only | Quick review, daily summaries |
| `*-full.md` | Full injected content, tool results | Deep analysis, debugging |

Use `--full` to generate both versions, or `--full-only` for full version only.

## Formatting

- `## User (Turn N)` - User prompts (includes full command text like `/log message`)
- `## User (Turn N)` with `**Invoked: ...**` - System-injected skill/command expansion (the turn after command invocation)
- `## Agent (Turn N)` - Agent responses
- `### Subagent: type (description)` - Task tool spawns
- Hook status: `✓` = exit 0, `✗ (exit N)` = non-zero

## Architecture

| Component | Role |
|-----------|------|
| `scripts/claude_transcript.py` | CLI entry point |
| `lib/session_reader.py` | Parses JSONL, formats markdown |

Session reader combines main session, agent transcripts, and hook logs.
