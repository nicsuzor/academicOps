[project]
name = "academicOps"
version = "0.1.0"
description = "A modular, hierarchical agent framework for rigorous, context-aware automation in academic research projects."
readme = "README.md"
requires-python = ">=3.11.0"
dependencies = [
  "pydantic>=2.12.2",
  "pytest",
  "pytest-anyio>=0.0.0",
  "pytest-timeout>=2.4.0",
  "pytest-xdist>=3.8.0",
]

[tool.pytest.ini_options]
markers = [
  "integration: integration tests (slower, mocked and faked at the edges)",
  "endtoend: tests that require real API calls with valid credentials",
  "slow: mark tests as slow (deselect with '-m \"not slow\"')",
]

timeout = 10 # Default timeout for fast unit tests (integration tests override with @pytest.mark.timeout(120))
asyncio_default_fixture_loop_scope = "package"
asyncio_debug = true
addopts = [
  "--durations=10",
  "-n 20",
  "-v", # show name of tests
  "-rfEX", # show extra summary info, including for failed, eXpected failures, and Errors
  "-s",
  "-m not slow",
  "--tb=short",
]

[dependency-groups]
dev = [
  "mypy>=1.18.2",
  "pre-commit>=4.3.0",
  "radon>=6.0.1",
  "ruff>=0.14.0",
]

[tool.ruff]
target-version = "py311"
line-length = 88
exclude = [
  ".git",
  ".venv",
  "__pycache__",
  "build",
  "dist",
]

[tool.ruff.lint]
# Enable comprehensive rule sets
select = [
  "E", # pycodestyle errors
  "F", # pyflakes
  "W", # pycodestyle warnings
  "C90", # mccabe complexity
  "I", # isort
  "N", # pep8-naming
  "UP", # pyupgrade
  "B", # flake8-bugbear
  "A", # flake8-builtins
  "C4", # flake8-comprehensions
  "DTZ", # flake8-datetimez
  "T10", # flake8-debugger
  "EM", # flake8-errmsg
  "ISC", # flake8-implicit-str-concat
  "ICN", # flake8-import-conventions
  "PIE", # flake8-pie
  "PT", # flake8-pytest-style
  "Q", # flake8-quotes
  "RSE", # flake8-raise
  "RET", # flake8-return
  "SIM", # flake8-simplify
  "TID", # flake8-tidy-imports
  "ARG", # flake8-unused-arguments
  "PTH", # flake8-use-pathlib
  "PL", # Pylint
  "RUF", # Ruff-specific rules
]

ignore = [
  "E501", # Line too long (handled by formatter)
  "PLR0913", # Too many arguments
  "PLR2004", # Magic value comparison
]

[tool.ruff.lint.mccabe]
max-complexity = 10

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = [
  "ARG", # Unused arguments common in fixtures
  "PLR2004", # Magic values OK in tests
]

[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = false
no_implicit_optional = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
strict_equality = true
strict_concatenate = true

[[tool.mypy.overrides]]
module = "tests.*"
disallow_untyped_defs = false
