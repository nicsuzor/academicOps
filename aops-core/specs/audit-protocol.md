---
title: Framework Audit Protocol
type: spec
category: governance
status: active
permalink: audit-protocol
tags: [audit, governance, validation, framework-health]
---

# Framework Audit Protocol

**Purpose**: Defines what constitutes a "complete audit" of the aops-core framework and the standards for audit execution and reporting.

## Audit Scope

A complete framework audit validates three dimensions:

### 1. Structure Audit

**Definition**: Verify filesystem organization matches documented indices.

**Validation targets**:
- INDEX.md accurately reflects directory structure
- README.md tables reference existing components
- All cross-references (`→`, `[[wikilinks]]`) resolve to existing files
- No broken links in documentation

**Output**: List of missing entries, broken references, and orphaned components.

### 2. Justification Audit

**Definition**: Verify each framework component traces to a governing specification or core document.

**Traceability hierarchy** (checked in order):
1. **Explicit spec**: Component has dedicated spec in `specs/`
2. **README.md reference**: Component documented in Core Loop or architecture sections
3. **Core doc reference**: Referenced in README.md, INDEX.md, or AGENTS.md
4. **Inline documentation**: Component has frontmatter/docstring explaining purpose

**Classification**:
- **Justified**: Found in specs/ with dedicated documentation
- **Implicit**: Referenced in core docs without dedicated spec (acceptable for support files)
- **Orphan**: No traceability found (requires action)

**Output**: Traceability matrix showing each component's justification source.

### 3. Updates and Remediation

**Definition**: Audit actively fixes discrepancies and reports items requiring human decision.

**Automated fixes**:
- Regenerate index files (INDEX.md, RULES.md, WORKFLOWS.md, SKILLS.md)
- Update README.md Core Loop flowchart from hook architecture
- Update README.md tables with current component lists
- Add missing entries to indices

**Human review required**:
- Orphaned files (delete or create spec?)
- Over-sized skills (refactor or document exception?)
- Hook/axiom mismatches (update hook or RULES.md?)
- Broken links to archived/deleted files

**Output**: Structured report with:
- Actions taken (automated fixes)
- Items requiring human review (with recommended actions)
- Issues created in bd for follow-up

## Audit Report Format

Every audit MUST produce a markdown report with:

### YAML Frontmatter

```yaml
---
title: Framework Audit Report
date: YYYY-MM-DD HH:MM:SS
duration_minutes: N
summary:
  structure_issues: N
  justification_orphans: N
  skill_violations: N
  indices_regenerated: N
  issues_created: N
status: PASS | ISSUES_FOUND
---
```

### Required Sections

1. **Executive Summary**: High-level findings and status
2. **Structure Audit Results**: Missing entries, broken links
3. **Justification Matrix**: Justified/Implicit/Orphan classification counts
4. **Content Violations**: Skill size, explanatory content, hook/axiom mismatches
5. **Actions Taken**: Indices regenerated, tables updated
6. **Human Review Queue**: Orphans and violations requiring decisions
7. **Issues Created**: List of bd issues filed with IDs

## Output Location

Reports are saved to: `${ACA_DATA}/projects/aops/audit/[date]-audit.md`

Format: `YYYY-MM-DD-HHMMSS-audit.md`

Example: `/home/nic/writing/data/projects/aops/audit/2026-01-14-153045-audit.md`

## Validation Criteria

An audit passes all checks when:

- [ ] All cross-references resolve (no broken `→` or `[[wikilinks]]`)
- [ ] Every directory appears in INDEX.md
- [ ] All skills < 500 lines
- [ ] No explanatory content in skill files (belongs in specs)
- [ ] All hooks with "Enforces:" declaration appear in RULES.md
- [ ] All axioms with Hard/Soft Gate in RULES.md have hook implementation
- [ ] Generated indices include "Generated by audit" header
- [ ] README.md < 200 lines
- [ ] Skills with multiple workflows have sub-workflows documented in README.md

## Execution Workflow

Audits follow the phased workflow defined in `skills/audit/SKILL.md`:

0. Health metrics baseline
1. Structure audit
2. Reference graph and link validation
3. Skill content audit
4. File justification audit
4b. Instruction justification audit
5. Documentation accuracy (FLOW.md vs hooks)
6. Regenerate indices
7. Other updates (README.md, etc.)
8. **Persist report** (MANDATORY)
9. Create bd issues for findings

**Critical**: Phase 8 (report persistence) is MANDATORY. No audit is complete without a written report.

## Quality Gates

### Before Starting Audit

- [ ] `bd ready` shows no blocking work
- [ ] Git working directory clean or changes stashed
- [ ] $AOPS and $ACA_DATA environment variables set

### During Audit

- [ ] TodoWrite tracks progress through all phases
- [ ] Each phase completes before moving to next
- [ ] All scripts run successfully (health, orphan check, wikilink check)

### Before Completing Audit

- [ ] Report written to `$ACA_DATA/projects/aops/audit/`
- [ ] All automated fixes committed
- [ ] bd issues created for findings requiring action
- [ ] Summary stats in report match actual findings

## Related Specifications

- [[specs/enforcement.md]] - Root cause analysis for failures
- [[specs/flow.md]] - Hook architecture audit validates against
- [[skills/audit/SKILL.md]] - Detailed phase instructions
