---
title: aops v1.1 Release Acceptance Tests
version: 1.1.0
type: acceptance-tests
description: Machine-readable acceptance tests for v1.1 release validation
---

# aops v1.1 Release Acceptance Tests

This file defines acceptance tests for the aops v1.1 release. Each test specifies:
- Real user input
- Expected behavior
- Structural pass criteria
- Evaluation method

## Test Runner Protocol

An agent reading this file should:

1. Parse each test case from the `## Tests` section
2. For each test:
   a. Invoke a real Claude Code session with the specified input
   b. Capture the hydrator output and/or agent response
   c. Evaluate against pass criteria
   d. Mark result: `PASS` or `FAIL` with explanation
3. Update the `## Results` section with outcomes

### Invocation Methods

- **hydrator-only**: Run `Task(subagent_type="aops-core:prompt-hydrator", prompt="<input>")` and evaluate hydrator output
- **full-session**: Run `claude_headless(prompt="<input>")` and evaluate full response
- **component**: Test specific component directly (unit test)

### Pass Criteria Types

- `contains`: Output must contain specified strings (case-insensitive)
- `calls_tool`: Agent must invoke specified MCP tool
- `references_workflow`: Hydrator output references specified workflow
- `creates_task`: Task manager receives create_task call with specified fields

---

## Tests

### TEST-001: Email Triage Routing

**ID**: `v1.1-email-triage-routing`

**Description**: When user requests email check, hydrator should use Outlook MCP tools to retrieve emails and present actionable options.

**User Input**:
```
check my email
```

**Expected Behavior**:
1. Hydrator identifies intent as email-related
2. Hydrator invokes Outlook MCP tools to retrieve email data
3. Output contains real email information (accounts, subjects, senders)
4. User presented with options to continue (search, read, triage)

**Invocation Method**: `hydrator-only`

**Pass Criteria**:
```yaml
type: all_of
checks:
  - type: contains_any
    target: hydrator_output
    values:
      - unread
      - inbox
      - messages
      - email
  - type: contains_any
    target: hydrator_output
    values:
      - qut.edu.au
      - suzor.net
      - Recent messages
      - subject
  - type: contains_any
    target: hydrator_output
    values:
      - Would you like
      - search
      - read
      - specific
```

**Why This Matters**: This validates that the hydrator correctly routes natural language email requests to the Outlook MCP integration. The hydrator may either plan (recommend tools) or directly execute - both are valid. Success is proven by real email data appearing in output.

**Related**:
- Workflow: `[[workflows/email-capture]]`
- Skill: `/email`
- MCP: `aops-tools/outlook`

---

## Results

_Results populated by test runner agent_

| Test ID | Status | Timestamp | Notes |
|---------|--------|-----------|-------|
| TEST-001 | PENDING | - | - |

---

## Test Runner Implementation Notes

### For Hydrator-Only Tests

```python
# Invoke hydrator and capture output
result = Task(
    subagent_type="aops-core:prompt-hydrator",
    prompt="check my email"
)

# Evaluate pass criteria
output = result.lower()
passed = (
    "outlook" in output and
    any(x in output for x in ["email-capture", "triage-email", "messages_list_recent"]) and
    any(x in output for x in ["create_task", "task creation", "extract action items"])
)
```

### For Full-Session Tests

```python
# Use headless fixture from tests/integration/conftest.py
result = claude_headless(
    prompt="check my email",
    timeout_seconds=120,
    cwd=writing_root
)

# Evaluate based on agent actions and response
```

### Result Format

When marking results, update the Results table with:
- **Status**: `PASS` | `FAIL` | `ERROR` | `SKIP`
- **Timestamp**: ISO format
- **Notes**: For FAIL/ERROR, explain what didn't match

Example FAIL note:
```
FAIL: Hydrator output missing workflow reference.
Found: "outlook", "messages_list_recent"
Missing: No reference to email-capture, triage-email, or task creation
```

---

## Adding New Tests

Copy this template:

```markdown
### TEST-NNN: <Short Description>

**ID**: `v1.1-<kebab-case-id>`

**Description**: <What this test validates>

**User Input**:
```
<exact user prompt>
```

**Expected Behavior**:
1. <Step 1>
2. <Step 2>

**Invocation Method**: `hydrator-only` | `full-session` | `component`

**Pass Criteria**:
```yaml
type: all_of | any_of
checks:
  - type: contains | calls_tool | references_workflow | creates_task
    target: hydrator_output | agent_response | tool_calls
    values:
      - <value1>
      - <value2>
```

**Why This Matters**: <Business justification>

**Related**:
- <Links to related workflows, skills, docs>
```
